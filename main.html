<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ç¦åˆ©ç¤¾æŠ½ç±¤åƒä»€éº¼ ğŸ‹</title>

<style>
body{
  font-family:"Microsoft JhengHei",sans-serif;
  background:linear-gradient(#fef3c7,#fde68a);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card{
  background:#fff;
  width:360px;
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 20px rgba(0,0,0,.15);
}
h1{text-align:center;}

.options{
  font-size:14px;
  margin:12px 0;
}
.options label{
  display:block;
  margin-bottom:6px;
}

button{
  width:100%;
  padding:10px;
  font-size:16px;
  border:none;
  border-radius:10px;
  background:#b45309;
  color:white;
  cursor:pointer;
}
button:hover{background:#92400e;}

.tube{
  margin:16px auto;
  width:120px;
  height:160px;
  border:4px solid #92400e;
  border-radius:12px;
  position:relative;
  overflow:hidden;
  background:#fff7ed;
}

.stick{
  width:80px;
  height:16px;
  background:#fde68a;
  border-radius:6px;
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  animation:drop 0.8s ease-in forwards;
}

@keyframes drop{
  from{ top:-20px; opacity:0; }
  to{ top:120px; opacity:1; }
}

.result{
  margin-top:16px;
  background:#fff7ed;
  padding:12px;
  border-radius:10px;
  line-height:1.6;
  font-size:14px;
}
</style>
</head>

<body>
<div class="card">
  <h1>ğŸ‹ ç¦åˆ©ç¤¾æŠ½ç±¤</h1>
  <p style="text-align:center">ä»Šå¤©çš„ç±¤é‹æ˜¯â€¦â€¦</p>

  <div class="options">
    <label><input type="checkbox" id="drink"> åŠ æŠ½é£²æ–™</label>
    <label><input type="checkbox" id="limit"> ç¸½é‡‘é¡ä¸è¶…é 60 å…ƒ</label>
  </div>

  <button onclick="startDraw()">é–‹å§‹æŠ½ç±¤</button>

  <div class="tube" id="tube"></div>

  <div class="result" id="result">ç­‰å¾…æŠ½ç±¤ ğŸ¯</div>
</div>

<script>
const mustFoods = [
  {name:"é»å¿ƒéºµ",price:50},
  {name:"æ°´é¤ƒ",price:40},
  {name:"æ»·å‘³",price:35}
];

const luckyFoods = [
  {name:"èŒ¶è‘‰è›‹",price:11},
  {name:"é—œæ±ç…®",price:"random"}
];

const drinks = [
  {name:"éº¥é¦™",price:10},
  {name:"å¤§å¸ç®¡",price:30},
  {name:"å¯çˆ¾å¿…æ€",price:25},
  {name:"é˜¿è¯ç”°",price:25}
];

function startDraw(){
  const tube = document.getElementById("tube");
  const result = document.getElementById("result");

  tube.innerHTML = "";
  result.innerHTML = "ğŸ‹ æŠ½ç±¤ä¸­â€¦â€¦ç±¤æ­£åœ¨æ‰å‡ºä¾†";

  // ç”¢ç”Ÿæ‰ç±¤å‹•ç•«
  for(let i=0;i<3;i++){
    setTimeout(()=>{
      const stick = document.createElement("div");
      stick.className = "stick";
      tube.appendChild(stick);
    }, i * 300);
  }

  // å‹•ç•«çµæŸå¾Œé¡¯ç¤ºçµæœ
  setTimeout(drawResult, 1200);
}

function drawResult(){
  const addDrink = document.getElementById("drink").checked;
  const limit = document.getElementById("limit").checked;
  const result = document.getElementById("result");

  while(true){
    let total = 0;
    let text = "";

    const luckRoll = Math.random();
    let luckText = "ğŸ˜ å°å‰";
    if(luckRoll > 0.7) luckText = "ğŸŠ å¤§å‰";
    else if(luckRoll > 0.4) luckText = "ğŸ™‚ ä¸­å‰";

    text += `ä½ æŠ½åˆ°çš„æ˜¯ <b>${luckText}</b> ç±¤ã€‚<br><br>`;

    const main = mustFoods[Math.floor(Math.random()*mustFoods.length)];
    text += `ğŸš ä¸»é¤æŠ½åˆ°ï¼š${main.name}ï¼ˆ${main.price} å…ƒï¼‰<br>`;
    total += main.price;

    if(luckText !== "ğŸ˜ å°å‰"){
      const lucky = luckyFoods[Math.floor(Math.random()*luckyFoods.length)];
      if(lucky.name === "é—œæ±ç…®"){
        const sticks = Math.random()<0.5?1:2;
        const price = sticks===1?15:30;
        text += `ğŸ¢ å¹¸é‹åŠ æŠ½ï¼šé—œæ±ç…® ${sticks} ä¸²ï¼ˆ${price} å…ƒï¼‰<br>`;
        total += price;
      }else{
        text += `ğŸ¥š å¹¸é‹åŠ æŠ½ï¼šèŒ¶è‘‰è›‹ï¼ˆ11 å…ƒï¼‰<br>`;
        total += 11;
      }
    }

    if(addDrink){
      const d = drinks[Math.floor(Math.random()*drinks.length)];
      text += `ğŸ¥¤ é£²æ–™ï¼š${d.name}ï¼ˆ${d.price} å…ƒï¼‰<br>`;
      total += d.price;
    }

    if(!limit || total <= 60){
      text += `<br>ğŸ’° ç¸½é‡‘é¡ï¼š<b>${total} å…ƒ</b>`;
      result.innerHTML = text;
      break;
    }
  }
}
</script>
</body>
</html>
