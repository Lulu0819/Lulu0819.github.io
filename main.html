<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ç¦åˆ©ç¤¾æŠ½ç±¤åƒä»€éº¼ ğŸ‹</title>
<style>
body{
  font-family:"Microsoft JhengHei",sans-serif;
  background:linear-gradient(#fef3c7,#fde68a);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card{
  background:#fff;
  width:360px;
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 20px rgba(0,0,0,.15);
  text-align:center;
  position:relative;
}
h1{text-align:center;}
.options{
  font-size:14px;
  margin:12px 0;
  text-align:left;
}
.options label{
  display:block;
  margin-bottom:6px;
}
button{
  width:100%;
  padding:10px;
  font-size:16px;
  border:none;
  border-radius:10px;
  background:#b45309;
  color:white;
  cursor:pointer;
}
button:hover{background:#92400e;}
.result{
  margin-top:16px;
  background:#fff7ed;
  padding:12px;
  border-radius:10px;
  line-height:1.6;
  font-size:14px;
  min-height:80px;
}
/* ç±¤ç­’å‹•ç•« */
.tube{
  width:60px;
  height:80px;
  background:red;
  margin:12px auto;
  border-radius:12px;
  position:relative;
  animation:none;
}
.tube::before{
  content:"";
  width:100%;
  height:10px;
  background:#800000;
  display:block;
  border-radius:6px 6px 0 0;
  position:absolute;
  top:0;
  left:0;
}
.tube.shake{
  animation: shake 0.8s;
}
@keyframes shake{
  0%{transform: rotate(0deg);}
  20%{transform: rotate(15deg);}
  40%{transform: rotate(-15deg);}
  60%{transform: rotate(10deg);}
  80%{transform: rotate(-10deg);}
  100%{transform: rotate(0deg);}
}
</style>
</head>
<body>
<div class="card">
  <h1>ğŸ‹ ç¦åˆ©ç¤¾æŠ½ç±¤</h1>
  <p>ä»Šå¤©çš„ç±¤é‹æ˜¯â€¦â€¦</p>
  <div class="tube" id="tube"></div>

  <div class="options">
    <label><input type="checkbox" id="drink"> åŠ æŠ½é£²æ–™</label>
    <label><input type="checkbox" id="limit"> ç¸½é‡‘é¡ä¸è¶…é 60 å…ƒ</label>
  </div>

  <button onclick="draw()">é–‹å§‹æŠ½ç±¤</button>

  <div class="result" id="result">é»æ“ŠæŒ‰éˆ•æŠ½ç±¤ ğŸ¯</div>
</div>

<script>
const mustFoods = [
  {name:"é»å¿ƒéºµ",price:50},
  {name:"æ°´é¤ƒ",price:40},
  {name:"æ»·å‘³",price:35},
  {name:"ä¾¿ç•¶",price:80}
];

const luckyFoods = [
  {name:"èŒ¶è‘‰è›‹",price:11},
  {name:"é—œæ±ç…®",price:"random"}
];

const puddings = [
  {name:"å°å¸ƒä¸",price:12},
  {name:"å¤§å¸ƒä¸",price:18}
];

const drinks = [
  {name:"éº¥é¦™",price:10},
  {name:"å¤§å¸ç®¡",price:30},
  {name:"å¯çˆ¾å¿…æ€",price:25},
  {name:"é˜¿è¯ç”°",price:25}
];

function draw(){
  const addDrink = document.getElementById("drink").checked;
  const limit = document.getElementById("limit").checked;
  const result = document.getElementById("result");
  const tube = document.getElementById("tube");

  // æ’­æ”¾æ–ç±¤å‹•ç•«
  tube.classList.add("shake");
  result.innerHTML = "æ–ç±¤ä¸­â€¦ğŸ€";

  setTimeout(()=>{
    tube.classList.remove("shake");

    while(true){
      let total = 0;
      let text = "";

      // ç±¤é‹
      const luckRoll = Math.random();
      let luckText = "ğŸ˜ å°å‰";
      if(luckRoll > 0.7) luckText = "ğŸŠ å¤§å‰";
      else if(luckRoll > 0.4) luckText = "ğŸ™‚ ä¸­å‰";

      text += `ä½ æŠ½åˆ°çš„æ˜¯ <b>${luckText}</b> ç±¤ã€‚<br><br>`;

      // ä¸»é¤ï¼ˆå››æ“‡ä¸€ï¼‰
      const main = mustFoods[Math.floor(Math.random()*mustFoods.length)];
      text += `ğŸš ä¸»é¤æŠ½åˆ°ï¼š${main.name}ï¼ˆ${main.price} å…ƒï¼‰<br>`;
      total += main.price;

      // å¹¸é‹åŠ æŠ½
      if(luckText !== "ğŸ˜ å°å‰"){
        const lucky = luckyFoods[Math.floor(Math.random()*luckyFoods.length)];
        if(lucky.name === "é—œæ±ç…®"){
          const sticks = Math.random()<0.5?1:2;
          const price = sticks===1?15:30;
          text += `ğŸ¢ å¹¸é‹åŠ æŠ½ï¼šé—œæ±ç…® ${sticks} ä¸²ï¼ˆ${price} å…ƒï¼‰<br>`;
          total += price;
        }else{
          text += `ğŸ¥š å¹¸é‹åŠ æŠ½ï¼šèŒ¶è‘‰è›‹ï¼ˆ11 å…ƒï¼‰<br>`;
          total += 11;
        }
      }

      // å¤§å‰åŠ å¸ƒä¸
      if(luckText === "ğŸŠ å¤§å‰"){
        const pud = puddings[Math.floor(Math.random()*puddings.length)];
        text += `ğŸ® å¹¸é‹åŠ æŠ½ï¼š${pud.name}ï¼ˆ${pud.price} å…ƒï¼‰<br>`;
        total += pud.price;
      }

      // é£²æ–™
      if(addDrink){
        const d = drinks[Math.floor(Math.random()*drinks.length)];
        text += `ğŸ¥¤ é£²æ–™ï¼š${d.name}ï¼ˆ${d.price} å…ƒï¼‰<br>`;
        total += d.price;
      }

      if(!limit || total <= 60){
        text += `<br>ğŸ’° ç¸½é‡‘é¡ï¼š<b>${total} å…ƒ</b>`;
        result.innerHTML = text;
        break;
      }
    }

  }, 800); // æ–ç±¤å‹•ç•« 0.8 ç§’
}
</script>
</body>
</html>
