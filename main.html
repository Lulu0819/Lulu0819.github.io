<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ç¦åˆ©ç¤¾æŠ½ç±¤åƒä»€éº¼ ğŸ‹</title>

<style>
body{
  font-family:"Microsoft JhengHei",sans-serif;
  background:linear-gradient(#fef3c7,#fde68a);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card{
  background:#fff;
  width:360px;
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 20px rgba(0,0,0,.15);
  text-align:center;
}
h1{text-align:center;}
.options{
  font-size:14px;
  margin:12px 0;
}
.options label{
  display:block;
  margin-bottom:6px;
}
button{
  width:100%;
  padding:10px;
  font-size:16px;
  border:none;
  border-radius:10px;
  background:#b45309;
  color:white;
  cursor:pointer;
}
button:hover{background:#92400e;}
.result{
  margin-top:16px;
  background:#fff7ed;
  padding:12px;
  border-radius:10px;
  line-height:1.6;
  font-size:14px;
  min-height:120px;
}
#lottery {
  margin: 16px auto;
  width: 80px;
  height: 120px;
  background:#e11d48;
  border-radius:20px;
  position:relative;
  cursor:pointer;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  font-weight:bold;
  font-size:18px;
  user-select:none;
  animation: shake 0s;
}
@keyframes shake {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(15deg); }
  50% { transform: rotate(-15deg); }
  75% { transform: rotate(10deg); }
  100% { transform: rotate(0deg); }
}
</style>
</head>

<body>
<div class="card">
  <h1>ğŸ‹ ç¦åˆ©ç¤¾æŠ½ç±¤</h1>
  <p>ä»Šå¤©çš„ç±¤é‹æ˜¯â€¦â€¦</p>

  <div class="options">
    <label><input type="checkbox" id="drink"> åŠ æŠ½é£²æ–™</label>
    <label><input type="checkbox" id="limit"> ç¸½é‡‘é¡ä¸è¶…é 60 å…ƒ</label>
  </div>

  <div id="lottery">ğŸ‹</div>
  <div class="result" id="result">é»æ“Šç´…è‰²ç±¤ç­’æŠ½ç±¤ ğŸ¯</div>
</div>

<script>
const mustFoods = [
  {name:"é»å¿ƒéºµ",price:50},
  {name:"æ°´é¤ƒ",price:40},
  {name:"æ»·å‘³",price:35}
];

const luckyFoods = [
  {name:"èŒ¶è‘‰è›‹",price:11},
  {name:"é—œæ±ç…®",price:"random"}
];

const drinks = [
  {name:"éº¥é¦™",price:10},
  {name:"å¤§å¸ç®¡",price:30},
  {name:"å¯çˆ¾å¿…æ€",price:25},
  {name:"é˜¿è¯ç”°",price:25}
];

const puddings = [
  {name:"å¸ƒä¸ï¼ˆå¤§ï¼‰",price:18},
  {name:"å¸ƒä¸ï¼ˆå°ï¼‰",price:12}
];

const lotteryDiv = document.getElementById("lottery");
lotteryDiv.addEventListener("click", draw);

function draw(){
  const addDrink = document.getElementById("drink").checked;
  const limit = document.getElementById("limit").checked;
  const result = document.getElementById("result");

  // æŠ½ç±¤å‹•ç•«
  lotteryDiv.style.animation = "shake 0.6s";
  setTimeout(()=>{ lotteryDiv.style.animation = ""; }, 600);

  setTimeout(()=>{ // ç­‰å‹•ç•«å®Œå†å‡ºçµæœ
    while(true){
      let total = 0;
      let text = "";

      // æŠ½ç±¤é‹
      const luckRoll = Math.random();
      let luckText = "ğŸ˜ å°å‰";
      if(luckRoll > 0.7) luckText = "ğŸŠ å¤§å‰";
      else if(luckRoll > 0.4) luckText = "ğŸ™‚ ä¸­å‰";

      text += `ä½ æŠ½åˆ°çš„æ˜¯ <b>${luckText}</b> ç±¤ã€‚<br><br>`;

      // å¿…å‡ºä¸»é¤
      const main = mustFoods[Math.floor(Math.random()*mustFoods.length)];
      text += `ğŸš ä¸»é¤æŠ½åˆ°ï¼š${main.name}ï¼ˆ${main.price} å…ƒï¼‰<br>`;
      total += main.price;

      // å¹¸é‹åŠ æŠ½
      if(luckText !== "ğŸ˜ å°å‰"){
        const lucky = luckyFoods[Math.floor(Math.random()*luckyFoods.length)];
        if(lucky.name === "é—œæ±ç…®"){
          const sticks = Math.random()<0.5?1:2;
          const price = sticks===1?15:30;
          text += `ğŸ¢ å¹¸é‹åŠ æŠ½ï¼šé—œæ±ç…® ${sticks} ä¸²ï¼ˆ${price} å…ƒï¼‰<br>`;
          total += price;
        }else{
          text += `ğŸ¥š å¹¸é‹åŠ æŠ½ï¼šèŒ¶è‘‰è›‹ï¼ˆ11 å…ƒï¼‰<br>`;
          total += 11;
        }

        // é‹æ°£è¶…å¥½æŠ½å¸ƒä¸ (å¤§å‰ 50% æ©Ÿç‡, ä¸­å‰ 20% æ©Ÿç‡)
        let puddingChance = luckText==="ğŸŠ å¤§å‰"?0.5:0.2;
        if(Math.random()<puddingChance){
          const p = puddings[Math.floor(Math.random()*puddings.length)];
          text += `ğŸ® é‹æ°£å¥½åŠ æŠ½ï¼š${p.name}ï¼ˆ${p.price} å…ƒï¼‰<br>`;
          total += p.price;
        }
      }

      // é£²æ–™
      if(addDrink){
        const d = drinks[Math.floor(Math.random()*drinks.length)];
        text += `ğŸ¥¤ é£²æ–™ï¼š${d.name}ï¼ˆ${d.price} å…ƒï¼‰<br>`;
        total += d.price;
      }

      if(!limit || total <= 60){
        text += `<br>ğŸ’° ç¸½é‡‘é¡ï¼š<b>${total} å…ƒ</b>`;
        result.innerHTML = text;
        break;
      }
    }
  }, 650); // å‹•ç•«çµæŸå†é¡¯ç¤ºçµæœ
}
</script>
</body>
</html>
