<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ç¦åˆ©ç¤¾æŠ½ç±¤åƒä»€éº¼ ğŸ‹</title>
<style>
body{
  font-family:"Microsoft JhengHei",sans-serif;
  background:linear-gradient(#fef3c7,#fde68a);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card{
  background:#fff;
  width:360px;
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 20px rgba(0,0,0,.15);
  text-align:center;
  position:relative;
}
h1{text-align:center;}
.options{
  font-size:14px;
  margin:12px 0;
  text-align:left;
}
.options label{
  display:block;
  margin-bottom:6px;
}
button{
  width:100%;
  padding:10px;
  font-size:16px;
  border:none;
  border-radius:10px;
  background:#b45309;
  color:white;
  cursor:pointer;
}
button:hover{background:#92400e;}
.result{
  margin-top:16px;
  background:#fff7ed;
  padding:12px;
  border-radius:10px;
  line-height:1.6;
  font-size:14px;
  min-height:80px;
  position:relative;
  overflow:hidden;
}
/* ç±¤ç­’ */
.tube{
  width:60px;
  height:80px;
  background:red;
  margin:12px auto;
  border-radius:12px;
  position:relative;
}
.tube::before{
  content:"";
  width:100%;
  height:10px;
  background:#800000;
  display:block;
  border-radius:6px 6px 0 0;
  position:absolute;
  top:0;
  left:0;
}
/* ç±¤æ‰è½å‹•ç•« */
.talisman{
  width:80px;
  height:40px;
  background:#fffbcc;
  border:2px solid #f59e0b;
  border-radius:8px;
  position:absolute;
  top:0;
  left:50%;
  transform: translateX(-50%);
  display:flex;
  justify-content:center;
  align-items:center;
  font-weight:bold;
  color:#b45309;
  animation: drop 0.8s forwards;
}
@keyframes drop{
  0%{top:0; opacity:0; transform: translateX(-50%) scale(0.5);}
  50%{opacity:1; transform: translateX(-50%) scale(1.1);}
  100%{top:60px; opacity:1; transform: translateX(-50%) scale(1);}
}
</style>
</head>
<body>
<div class="card">
  <h1>ğŸ‹ ç¦åˆ©ç¤¾æŠ½ç±¤</h1>
  <p>ä»Šå¤©çš„ç±¤é‹æ˜¯â€¦â€¦</p>
  <div class="tube" id="tube"></div>

  <div class="options">
    <label><input type="checkbox" id="drink"> åŠ æŠ½é£²æ–™</label>
    <label><input type="checkbox" id="limit"> ç¸½é‡‘é¡ä¸è¶…é 60 å…ƒ</label>
  </div>

  <button onclick="draw()">é–‹å§‹æŠ½ç±¤</button>

  <div class="result" id="result">é»æ“ŠæŒ‰éˆ•æŠ½ç±¤ ğŸ¯</div>
</div>

<script>
const mustFoods = [
  {name:"é»å¿ƒéºµ",price:50},
  {name:"æ°´é¤ƒ",price:40},
  {name:"æ»·å‘³",price:35},
  {name:"ä¾¿ç•¶",price:80}
];

const luckyFoods = [
  {name:"èŒ¶è‘‰è›‹",price:11},
  {name:"é—œæ±ç…®",price:"random"}
];

const puddings = [
  {name:"å°å¸ƒä¸",price:12},
  {name:"å¤§å¸ƒä¸",price:18}
];

const drinks = [
  {name:"éº¥é¦™",price:10},
  {name:"å¤§å¸ç®¡",price:30},
  {name:"å¯çˆ¾å¿…æ€",price:25},
  {name:"é˜¿è¯ç”°",price:25}
];

function draw(){
  const addDrink = document.getElementById("drink").checked;
  const limit = document.getElementById("limit").checked;
  const result = document.getElementById("result");
  const tube = document.getElementById("tube");

  // æ¸…ç©ºä¹‹å‰ç±¤
  result.innerHTML = "";
  
  // æ±ºå®šç±¤é‹
  const luckRoll = Math.random();
  let luckText = "ğŸ˜ å°å‰";
  if(luckRoll > 0.7) luckText = "ğŸŠ å¤§å‰";
  else if(luckRoll > 0.4) luckText = "ğŸ™‚ ä¸­å‰";

  // å»ºç«‹ç±¤å…ƒç´ æ‰è½å‹•ç•«
  const talisman = document.createElement("div");
  talisman.className = "talisman";
  talisman.innerHTML = luckText;
  result.appendChild(talisman);

  // ç­‰å‹•ç•«çµæŸå†ç”Ÿæˆé£Ÿç‰©çµæœ
  setTimeout(()=>{
    while(true){
      let total = 0;
      let text = "";

      // ä¸»é¤
      const main = mustFoods[Math.floor(Math.random()*mustFoods.length)];
      text += `ğŸš ä¸»é¤æŠ½åˆ°ï¼š${main.name}ï¼ˆ${main.price} å…ƒï¼‰<br>`;
      total += main.price;

      // å¹¸é‹åŠ æŠ½
      if(luckText !== "ğŸ˜ å°å‰"){
        const lucky = luckyFoods[Math.floor(Math.random()*luckyFoods.length)];
        if(lucky.name === "é—œæ±ç…®"){
          const sticks = Math.random()<0.5?1:2;
          const price = sticks===1?15:30;
          text += `ğŸ¢ å¹¸é‹åŠ æŠ½ï¼šé—œæ±ç…® ${sticks} ä¸²ï¼ˆ${price} å…ƒï¼‰<br>`;
          total += price;
        }else{
          text += `ğŸ¥š å¹¸é‹åŠ æŠ½ï¼šèŒ¶è‘‰è›‹ï¼ˆ11 å…ƒï¼‰<br>`;
          total += 11;
        }
      }

      // å¤§å‰åŠ å¸ƒä¸
      if(luckText === "ğŸŠ å¤§å‰"){
        const pud = puddings[Math.floor(Math.random()*puddings.length)];
        text += `ğŸ® å¹¸é‹åŠ æŠ½ï¼š${pud.name}ï¼ˆ${pud.price} å…ƒï¼‰<br>`;
        total += pud.price;
      }

      // é£²æ–™
      if(addDrink){
        const d = drinks[Math.floor(Math.random()*drinks.length)];
        text += `ğŸ¥¤ é£²æ–™ï¼š${d.name}ï¼ˆ${d.price} å…ƒï¼‰<br>`;
        total += d.price;
      }

      if(!limit || total <= 60){
        result.innerHTML += `<br>${text}<br>ğŸ’° ç¸½é‡‘é¡ï¼š<b>${total} å…ƒ</b>`;
        break;
      }
    }
  }, 900); // å‹•ç•«æ™‚é–“
}
</script>
</body>
</html>
