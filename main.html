<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>史萊姆疊疊樂 - 修正版</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body { margin: 0; background: #eef9ff; overflow: hidden; display: flex; flex-direction: column; height: 100vh; font-family: sans-serif; }
        #game-stage { flex: 1; position: relative; cursor: pointer; }
        #toolbar { 
            height: 140px; background: #fff; border-top: 5px solid #81d4fa;
            display: flex; align-items: center; justify-content: start; 
            gap: 12px; padding: 0 20px; overflow-x: auto;
        }
        .slime-unit { width: 70px; height: 70px; object-fit: contain; cursor: grab; transition: 0.2s; border-radius: 10px; background: #fdfdfd; padding: 5px; }
        .slime-unit:hover { transform: scale(1.1); background: #e1f5fe; }
    </style>
</head>
<body>
<div id="game-stage"></div>
<div id="toolbar"></div>
<script>
    const { Engine, Render, Runner, Bodies, Composite, MouseConstraint, Mouse, Events, Body } = Matter;
    const engine = Engine.create();
    const stage = document.getElementById('game-stage');
    
    const render = Render.create({
        element: stage, engine: engine,
        options: { width: window.innerWidth, height: window.innerHeight - 140, wireframes: false, background: 'transparent' }
    });

    const floor = Bodies.rectangle(window.innerWidth/2, window.innerHeight - 130, window.innerWidth, 20, { 
        isStatic: true, render: { fillStyle: '#b3e5fc' } 
    });

    // --- 關鍵修正：對應你的 GitHub 檔案名稱 slime_base.png.png ---
    const baseSlime = Bodies.rectangle(window.innerWidth/2, window.innerHeight - 200, 240, 110, {
        isStatic: true, 
        render: { sprite: { texture: 'slime_base.png.png', xScale: 0.45, yScale: 0.45 } }
    });

    Composite.add(engine.world, [floor, baseSlime]);
    Render.run(render);
    Runner.run(Runner.create(), engine);

    const toolbar = document.getElementById('toolbar');
    for (let i = 1; i <= 12; i++) {
        const img = document.createElement('img');
        // --- 關鍵修正：對應你的 GitHub 檔案名稱 slime_X.png.png ---
        const fileName = `slime_${i}.png.png`; 
        
        img.src = fileName;
        img.className = 'slime-unit';
        img.onclick = () => {
            const s = Bodies.rectangle(window.innerWidth/2, 50, 80, 60, {
                restitution: 0.6, friction: 0.8, chamfer: { radius: 20 },
                render: { sprite: { texture: fileName, xScale: 0.4, yScale: 0.4 } }
            });
            Composite.add(engine.world, s);
        };
        toolbar.appendChild(img);
    }

    const mouse = Mouse.create(render.canvas);
    const mConstraint = MouseConstraint.create(engine, { mouse: mouse, constraint: { stiffness: 0.2, render: { visible: false } } });
    Composite.add(engine.world, mConstraint);

    window.addEventListener('resize', () => {
        render.canvas.width = window.innerWidth;
        render.canvas.height = window.innerHeight - 140;
    });
</script>
</body>
</html>
